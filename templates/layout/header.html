<header class="questionnaire-header">
    <div class="logo-container">
        <span class="logo-icon">✈️</span>
        <h1><a href="{{ url_for('index') }}" style="color: inherit; text-decoration: none;">Traveling.Kinki</a></h1>
    </div>
    <p class="subtitle">旅の計画は、ここから始まる。</p>

    <div class="user-info" id="userInfo" style="display: none;">
        <span>ようこそ、<span id="headerUserName">ユーザー</span>さん！</span>
    </div>
</header>

<script>
// ヘッダーのユーザー情報表示
async function loadHeaderUserInfo() {
    try {
        const authRes = await fetch('/api/check-auth', {
            credentials: 'include'
        });
        const authData = await authRes.json();

        if (authData.authenticated) {
            const detailRes = await fetch('/api/user', {
                credentials: 'include'
            });
            const detailData = await detailRes.json();

            if (detailData.success) {
                const userName = detailData.user?.name || 'ユーザー';
                document.getElementById('headerUserName').textContent = userName;
                document.getElementById('userInfo').style.display = 'block';
            }
        }
    } catch (error) {
        console.error('ヘッダー情報の読み込みに失敗:', error);
    }
}

// ページ読み込み時に実行
document.addEventListener('DOMContentLoaded', loadHeaderUserInfo);
</script>